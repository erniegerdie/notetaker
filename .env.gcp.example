# GCP Deployment Environment Variables
# Copy this file to .env when deploying to GCP Cloud Run

# ============================================================================
# GCP Configuration
# ============================================================================
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1
CLOUD_TASKS_QUEUE=video-processing-queue
WORKER_SERVICE_URL=https://notetaker-worker-xxxxx-uc.a.run.app
CLOUD_TASKS_SERVICE_ACCOUNT=cloud-tasks@your-project.iam.gserviceaccount.com

# ============================================================================
# Database (Cloud SQL)
# ============================================================================
# For Cloud Run (Unix socket connection):
DATABASE_URL=postgresql+asyncpg://postgres:PASSWORD@/notetaker?host=/cloudsql/PROJECT:REGION:INSTANCE

# For local development with Cloud SQL Proxy:
# DATABASE_URL=postgresql+asyncpg://postgres:PASSWORD@localhost:5432/notetaker

# ============================================================================
# Supabase Authentication
# ============================================================================
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_JWT_SECRET=your-jwt-secret

# ============================================================================
# OpenAI API
# ============================================================================
OPENAI_API_KEY=sk-...
OPENROUTER_API_KEY=sk-or-v1-...

# ============================================================================
# Cloudflare R2 Storage
# ============================================================================
R2_ENDPOINT_URL=https://xxxxx.r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=xxxxx
R2_SECRET_ACCESS_KEY=xxxxx
R2_BUCKET_NAME=notetaker-videos
R2_PUBLIC_URL=https://xxxxx.r2.dev

# ============================================================================
# Model Configuration
# ============================================================================
TRANSCRIPTION_MODEL=whisper-1
TRANSCRIPTION_FALLBACK_MODEL=gpt-4o-mini-transcribe
NOTES_MODEL=openrouter/google/gemini-2.5-flash
MAX_CONCURRENT_TRANSCRIPTIONS=4
CHUNK_THRESHOLD_MB=4

# ============================================================================
# Video Compression Settings
# ============================================================================
ENABLE_VIDEO_COMPRESSION=true
COMPRESSION_CRF=20
COMPRESSION_MAX_WIDTH=1920
COMPRESSION_MAX_HEIGHT=1080
COMPRESSION_MAX_FPS=30
COMPRESSION_AUDIO_BITRATE=128k

# ============================================================================
# File Handling
# ============================================================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=500
ALLOWED_VIDEO_FORMATS=mp4,avi,mov,mkv,webm

# ============================================================================
# Notes
# ============================================================================
# 1. DATABASE_URL format for Cloud Run uses Unix socket:
#    postgresql+asyncpg://USER:PASSWORD@/DATABASE?host=/cloudsql/PROJECT:REGION:INSTANCE
#
# 2. WORKER_SERVICE_URL is the Cloud Run URL of the worker service
#    Get it after deploying with: gcloud run services describe notetaker-worker --region=us-central1 --format='value(status.url)'
#
# 3. Most secrets should be stored in Google Secret Manager and accessed via Cloud Run configuration
#    This .env file is primarily for local development with Cloud SQL Proxy
#
# 4. For production deployment, use `make deploy-all` which configures secrets automatically
